# –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è TICK Stack

## ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞:

- Docker plugin –¥–æ–±–∞–≤–ª–µ–Ω –≤ telegraf.conf
- privileged: true –¥–æ–±–∞–≤–ª–µ–Ω –≤ docker-compose.yml
- –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è (task01-06.md) –≥–æ—Ç–æ–≤—ã

---

## üöÄ –ó–∞–ø—É—Å–∫ TICK Stack

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
cd /home/nikita/monitoring/my-homework
sudo docker compose up -d
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
sudo docker ps

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:
# - influxdb (–ø–æ—Ä—Ç 8086)
# - telegraf
# - chronograf (–ø–æ—Ä—Ç 8888)
# - kapacitor (–ø–æ—Ä—Ç 9092)
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã)

```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
sudo docker compose logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
sudo docker compose logs telegraf
sudo docker compose logs influxdb
sudo docker compose logs chronograf
```

---

## üì∏ –ó–∞–¥–∞–Ω–∏–µ 7: –°–∫—Ä–∏–Ω—à–æ—Ç Chronograf

**–¶–µ–ª—å:** –ó–∞–ø—É—Å—Ç–∏—Ç—å TICK stack –∏ —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Chronograf

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: **http://localhost:8888**
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Chronograf
4. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è:
   - –í—ã–±—Ä–∞—Ç—å InfluxDB connection (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
   - Username: admin
   - Password: admin123
5. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã**

### –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ:
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Chronograf
- –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–ª–µ–≤–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ InfluxDB

---

## üì∏ –ó–∞–¥–∞–Ω–∏–µ 8: Data Explorer - –ú–µ—Ç—Ä–∏–∫–∏ CPU

**–¶–µ–ª—å:** –ò–∑—É—á–∏—Ç—å Data Explorer –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ CPU —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

1. –í Chronograf –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Explore"** (Data Explorer)
2. –ù–∞–∂–º–∏—Ç–µ **"Add a query"**
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–∞–ø—Ä–æ—Å:

   **Database:** `telegraf.autogen`

   **FROM:**
   - Measurement: `cpu`
   - WHERE: `host = telegraf` (–∏–ª–∏ –∏–º—è –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∞)

   **SELECT:**
   - Field: `usage_system` (–∏–ª–∏ `usage_user`, `usage_idle`)

   **GROUP BY:**
   - time: `10s` (–∏–ª–∏ –¥—Ä—É–≥–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª)
   - `cpu` (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å –ø–æ —è–¥—Ä–∞–º)

4. –í–Ω–∏–∑—É –ø–æ—è–≤–∏—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫ —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ CPU
5. –ü–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:
   - –ò–∑–º–µ–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (1s, 30s, 1m)
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–æ–ª—è (usage_user, usage_idle)
   - –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫ –Ω–∞ –æ–¥–∏–Ω –≥—Ä–∞—Ñ–∏–∫

6. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≥—Ä–∞—Ñ–∏–∫–∞ CPU —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏**

### –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ:
- –ì—Ä–∞—Ñ–∏–∫ —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ CPU
- SQL-–ø–æ–¥–æ–±–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤–≤–µ—Ä—Ö—É
- –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞
- –ó–Ω–∞—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫

---

## üì∏ –ó–∞–¥–∞–Ω–∏–µ 9: Docker –º–µ—Ç—Ä–∏–∫–∏ –≤ Telegraf

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Docker –ø–ª–∞–≥–∏–Ω —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-30 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ (Telegraf —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥)

2. –í Chronograf –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Data Explorer**

3. –í—ã–±–µ—Ä–∏—Ç–µ database: `telegraf.autogen`

4. –í —Å–ø–∏—Å–∫–µ **measurements** –Ω–∞–π–¥–∏—Ç–µ Docker –º–µ—Ç—Ä–∏–∫–∏:
   - `docker_container_cpu`
   - `docker_container_mem`
   - `docker_container_net`
   - `docker_container_blkio`
   - `docker`
   - –ò –¥—Ä—É–≥–∏–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `docker_`

5. –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –º–µ—Ç—Ä–∏–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä `docker_container_cpu`
   - Field: `usage_percent`
   - –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫

6. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç:**
   - –°–ø–∏—Å–æ–∫ measurements —Å Docker –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–≤–∏–¥–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ docker_* –º–µ—Ç—Ä–∏–∫)
   - –ò–ª–∏ –≥—Ä–∞—Ñ–∏–∫ Docker –º–µ—Ç—Ä–∏–∫–∏

### –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ:
- –°–ø–∏—Å–æ–∫ measurements –≥–¥–µ –≤–∏–¥–Ω—ã `docker_container_*` –º–µ—Ç—Ä–∏–∫–∏
- –ò–õ–ò –≥—Ä–∞—Ñ–∏–∫ Docker –º–µ—Ç—Ä–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, CPU usage –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)

### –ï—Å–ª–∏ Docker –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Telegraf
sudo docker compose logs telegraf | grep -i docker

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Telegraf
sudo docker compose restart telegraf

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 30 —Å–µ–∫—É–Ω–¥ –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É Chronograf
```

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo docker compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo docker compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo docker compose restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
sudo docker compose restart telegraf

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo docker compose logs -f telegraf
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```bash
# –ü–∞–º—è—Ç—å —Å–∏—Å—Ç–µ–º—ã
free -h

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
sudo docker stats

# –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
sudo docker ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ Docker
sudo docker system df
```

### –û—á–∏—Å—Ç–∫–∞ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã + volumes
sudo docker compose down -v

# –û—á–∏—Å—Ç–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ Docker
sudo docker system prune -a
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```bash
cd /home/nikita/monitoring
./monitor-memory.sh 5
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –°–∏—Å—Ç–µ–º–Ω—É—é –ø–∞–º—è—Ç—å
- –ü–∞–º—è—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ TICK Stack:**
- InfluxDB: ~150-200 MB
- Telegraf: ~20-50 MB
- Chronograf: ~30-50 MB
- Kapacitor: ~30-50 MB
- **–ò—Ç–æ–≥–æ:** ~250-350 MB

---

## ‚úÖ Checklist –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [ ] TICK Stack –∑–∞–ø—É—â–µ–Ω (–≤—Å–µ 4 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞—é—Ç)
- [ ] Chronograf –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8888
- [ ] **–ó–∞–¥–∞–Ω–∏–µ 7:** –°–∫—Ä–∏–Ω—à–æ—Ç Chronograf —Å–¥–µ–ª–∞–Ω
- [ ] **–ó–∞–¥–∞–Ω–∏–µ 8:** –°–∫—Ä–∏–Ω—à–æ—Ç Data Explorer —Å CPU –º–µ—Ç—Ä–∏–∫–∞–º–∏ —Å–¥–µ–ª–∞–Ω
- [ ] **–ó–∞–¥–∞–Ω–∏–µ 9:** –°–∫—Ä–∏–Ω—à–æ—Ç Docker –º–µ—Ç—Ä–∏–∫ —Å–¥–µ–ª–∞–Ω
- [ ] –í—Å–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- [ ] –ó–∞–¥–∞–Ω–∏—è task01-06.md –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –ì–æ—Ç–æ–≤–æ –∫ –∫–æ–º–º–∏—Ç—É –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞–Ω–∏–π —É –≤–∞—Å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

**–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å:**
- task01.md - task06.md (‚úÖ —É–∂–µ –≥–æ—Ç–æ–≤—ã)

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å:**
- 3 —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ (Chronograf, CPU metrics, Docker metrics)
- –†–∞–±–æ—á–∏–π TICK Stack —Å Docker –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
- docker-compose.yml —Å TICK stack
- telegraf.conf —Å Docker –ø–ª–∞–≥–∏–Ω–æ–º
- kapacitor.conf

---

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π –º–æ–∂–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π moni!**

```bash
cd /home/nikita/monitoring/my-homework
git add .
git commit -m "Complete TICK stack monitoring homework

- Added Docker plugin to Telegraf
- Configured TICK stack with docker-compose
- Completed all theoretical tasks (1-6)
- Completed practical tasks (7-9) with screenshots"

git push origin main
```
